{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Faizal\\\\Downloads\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\Faizal\\\\Downloads\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Faizal\\\\Downloads\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Faizal\\\\Downloads\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Faizal\\\\Downloads\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Faizal\\\\Downloads\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Faizal\\\\Downloads\\\\e-voting\\\\src\\\\Components\\\\ChangePost.js\";\nimport React, { Component } from 'react';\nimport { Button, Form, Input, Select, Popup } from 'semantic-ui-react';\nimport firebaseConf from './Firebase';\nimport { withRouter, Link } from 'react-router-dom';\nimport { Offline } from 'react-detect-offline';\n\nvar ChangePost =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ChangePost, _Component);\n\n  function ChangePost(props) {\n    var _this;\n\n    _classCallCheck(this, ChangePost);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ChangePost).call(this, props));\n\n    _this.updatePost = function (postId, aspirantKey) {\n      var options = _this.state.options;\n\n      _this.setState({\n        isLoading: true\n      });\n\n      var prefect = options.find(function (option) {\n        return option.key === _this.state.selectedOption;\n      });\n      var prefectId = prefect.key;\n      var aspirantPush = {\n        firstName: _this.state.firstName,\n        lastName: _this.state.lastName,\n        prefectName: prefect.text,\n        prefectId: prefectId,\n        reason: _this.state.reason,\n        section: _this.state.section,\n        todo: _this.state.todo,\n        imageUrl: _this.state.imageUrl,\n        votes: []\n      };\n      /**\r\n       * similar to the Array.push method,\r\n       * this sends a copy of our object so\r\n       * that it can be stored in Firebase.\r\n       */\n\n      var itemsRef = firebaseConf.database().ref(\"posts/\".concat(prefectId, \"/aspirants\"));\n      itemsRef.push(aspirantPush).then(function () {\n        firebaseConf.database().ref(\"/posts/\".concat(postId, \"/aspirants/\").concat(aspirantKey)).remove();\n\n        _this.showAlert('success', 'You have successfully added a new post');\n\n        _this.setState({\n          isLoading: false\n        });\n      });\n    };\n\n    _this.handleOptionSelect = function (e, _ref) {\n      var name = _ref.name,\n          value = _ref.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.state = {\n      options: [{\n        key: ''\n      }],\n      selectedOption: '',\n      post: props.location.state ? props.location.state.post : '',\n      firstName: props.location.state ? props.location.state.firstName : '',\n      lastName: props.location.state ? props.location.state.lastName : '',\n      id: props.location.state ? props.location.state.id : '',\n      aspirantKey: props.location.state ? props.location.state.aspirantKey : '',\n      section: props.location.state ? props.location.state.section : '',\n      reason: props.location.state ? props.location.state.reason : '',\n      todo: props.location.state ? props.location.state.todo : '',\n      imageUrl: {\n        downloadURL: props.location.state.imageUrl\n      },\n      isLoading: false,\n      fullName: props.location.state.firstName + ' ' + props.location.state.lastName ? props.location.state.firstName + ' ' + props.location.state.lastName : ''\n    }; //post: props.location.state ? props.location.state.post : \"\"\n\n    return _this;\n  }\n\n  _createClass(ChangePost, [{\n    key: \"showAlert\",\n    value: function showAlert(type, message) {\n      var _this2 = this;\n\n      this.setState({\n        alert: true,\n        alertData: {\n          type: type,\n          message: message\n        }\n      });\n      setTimeout(function () {\n        _this2.setState({\n          alert: false\n        });\n      }, 8000);\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this3 = this;\n\n      firebaseConf.database().ref('posts').orderByChild('post').on('value', function (snapshot) {\n        var options = [];\n        snapshot.forEach(function (data) {\n          var optionNew = {\n            text: data.val().post,\n            value: data.key,\n            key: data.key\n          };\n          options.push(optionNew);\n\n          _this3.setState({\n            options: options\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state = this.state,\n          options = _this$state.options,\n          post = _this$state.post,\n          fullName = _this$state.fullName,\n          id = _this$state.id,\n          selectedOption = _this$state.selectedOption,\n          isLoading = _this$state.isLoading,\n          aspirantKey = _this$state.aspirantKey,\n          key = _this$state.key; // console.log(options);\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Change Aspirant Post\"), this.state.alert && React.createElement(\"div\", {\n        className: \"alert alert-\".concat(this.state.alertData.type),\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, this.state.alertData.message)), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, fullName), React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        widths: \"equal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(Form.Field, {\n        control: Input,\n        label: \"Post selected\",\n        placeholder: this.props.post,\n        readOnly: true,\n        value: post,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(Form.Field, {\n        control: Select,\n        label: \"Preferred Post\",\n        options: options,\n        placeholder: \"Post\",\n        name: \"selectedOption\",\n        value: selectedOption,\n        onChange: this.handleOptionSelect,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      })), React.createElement(Form.Field, {\n        control: Button,\n        loading: isLoading,\n        onClick: function onClick() {\n          return _this4.updatePost(id, aspirantKey);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Change\")), React.createElement(\"div\", {\n        style: {\n          marginLeft: '50%',\n          marginRight: '50%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \" \", React.createElement(Popup, {\n        trigger: React.createElement(Button, {\n          primary: true,\n          as: Link,\n          to: \"/admin\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, \"Go back!\"),\n        content: \"Go back to admin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      })), React.createElement(Offline, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"marquee\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"You are currently offline,Connect to the internet and continue the process\")));\n    }\n  }]);\n\n  return ChangePost;\n}(Component);\n\nexport default withRouter(ChangePost);","map":{"version":3,"sources":["C:\\Users\\Faizal\\Downloads\\e-voting\\src\\Components\\ChangePost.js"],"names":["React","Component","Button","Form","Input","Select","Popup","firebaseConf","withRouter","Link","Offline","ChangePost","props","updatePost","postId","aspirantKey","options","state","setState","isLoading","prefect","find","option","key","selectedOption","prefectId","aspirantPush","firstName","lastName","prefectName","text","reason","section","todo","imageUrl","votes","itemsRef","database","ref","push","then","remove","showAlert","handleOptionSelect","e","name","value","post","location","id","downloadURL","fullName","type","message","alert","alertData","setTimeout","orderByChild","on","snapshot","forEach","data","optionNew","val","marginLeft","marginRight"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Button, Form, Input, Select,Popup} from 'semantic-ui-react';\r\nimport firebaseConf from './Firebase';\r\nimport {withRouter, Link} from 'react-router-dom';\r\nimport {Offline} from 'react-detect-offline';\r\n\r\nclass ChangePost extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      options: [\r\n        {\r\n          key: '',\r\n        },\r\n      ],\r\n      selectedOption: '',\r\n      post: props.location.state ? props.location.state.post : '',\r\n      firstName: props.location.state ? props.location.state.firstName:'',\r\n      lastName: props.location.state? props.location.state.lastName:'',\r\n      id:props.location.state? props.location.state.id:'',\r\n      aspirantKey:props.location.state? props.location.state.aspirantKey:'',\r\n      section: props.location.state? props.location.state.section:'',\r\n      reason: props.location.state? props.location.state.reason:'',\r\n      todo: props.location.state? props.location.state.todo:'',\r\n      imageUrl:{ downloadURL: props.location.state.imageUrl},\r\n      isLoading: false,\r\n      fullName:\r\n        (props.location.state.firstName + ' ' + props.location.state.lastName)?props.location.state.firstName + ' ' + props.location.state.lastName:'',\r\n    };\r\n    //post: props.location.state ? props.location.state.post : \"\"\r\n  }\r\n  \r\n  showAlert(type, message) {\r\n    this.setState({\r\n      alert: true,\r\n      alertData: {type, message},\r\n    });\r\n    setTimeout(() => {\r\n      this.setState({alert: false});\r\n    }, 8000);\r\n  }\r\n  updatePost = (postId, aspirantKey) => {\r\n    const {options} = this.state;\r\n    this.setState({isLoading: true});\r\n    let prefect = options.find(option => {\r\n      return option.key === this.state.selectedOption;\r\n    });\r\n    let prefectId = prefect.key;\r\n    const aspirantPush = {\r\n      firstName: this.state.firstName,\r\n      lastName: this.state.lastName,\r\n      prefectName: prefect.text,\r\n      prefectId: prefectId,\r\n      reason: this.state.reason,\r\n      section: this.state.section,\r\n      todo: this.state.todo,\r\n      imageUrl: this.state.imageUrl,\r\n      votes: [],\r\n    };\r\n    \r\n    /**\r\n     * similar to the Array.push method,\r\n     * this sends a copy of our object so\r\n     * that it can be stored in Firebase.\r\n     */\r\n\r\n    const itemsRef = firebaseConf\r\n      .database()\r\n      .ref(`posts/${prefectId}/aspirants`);\r\n\r\n    itemsRef\r\n      .push(aspirantPush)\r\n\r\n      .then(() => {\r\n        firebaseConf\r\n          .database()\r\n          .ref(`/posts/${postId}/aspirants/${aspirantKey}`)\r\n          .remove();\r\n\r\n        this.showAlert('success', 'You have successfully added a new post');\r\n\r\n        this.setState({isLoading: false});\r\n      });\r\n  };\r\n\r\n  handleOptionSelect = (e, {name, value}) => {\r\n    this.setState({[name]: value});\r\n  };\r\n  componentWillMount() {\r\n    firebaseConf\r\n      .database()\r\n      .ref('posts')\r\n      .orderByChild('post')\r\n      .on('value', snapshot => {\r\n        const options = [];\r\n        snapshot.forEach(data => {\r\n          const optionNew = {\r\n            text: data.val().post,\r\n            value: data.key,\r\n            key: data.key,\r\n          };\r\n          options.push(optionNew);\r\n          this.setState({options: options});\r\n        });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      options,\r\n      post,\r\n      fullName,\r\n      id,\r\n      selectedOption,\r\n      isLoading,\r\n      aspirantKey,\r\n      key,\r\n    } = this.state;\r\n    // console.log(options);\r\n    return (\r\n      <div>\r\n        <h1>Change Aspirant Post</h1>\r\n\r\n        {this.state.alert && (\r\n          <div\r\n            className={`alert alert-${this.state.alertData.type}`}\r\n            role=\"alert\"\r\n          >\r\n            <div className=\"container\">{this.state.alertData.message}</div>\r\n          </div>\r\n        )}\r\n        <h2>{fullName}</h2>\r\n        <Form>\r\n          <Form.Group widths=\"equal\">\r\n            <Form.Field\r\n              control={Input}\r\n              label=\"Post selected\"\r\n              placeholder={this.props.post}\r\n              readOnly\r\n              value={post}\r\n            />\r\n            <Form.Field\r\n              control={Select}\r\n              label=\"Preferred Post\"\r\n              options={options}\r\n              placeholder=\"Post\"\r\n              name=\"selectedOption\"\r\n              value={selectedOption}\r\n              onChange={this.handleOptionSelect}\r\n            />\r\n          </Form.Group>\r\n          <Form.Field\r\n            control={Button}\r\n            loading={isLoading}\r\n            onClick={() => this.updatePost(id, aspirantKey)}\r\n          >\r\n            Change\r\n          </Form.Field>\r\n        </Form>\r\n        <div style={{marginLeft:'50%',marginRight:'50%'}}> <Popup  trigger={<Button primary  as={Link} to='/admin' >Go back!</Button>} content='Go back to admin'/></div>\r\n\r\n        <Offline>\r\n          <marquee>\r\n            You are currently offline,Connect to the internet and continue the\r\n            process\r\n          </marquee>\r\n        </Offline>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(ChangePost);\r\n"]},"metadata":{},"sourceType":"module"}