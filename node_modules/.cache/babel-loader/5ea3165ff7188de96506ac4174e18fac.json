{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Faizal\\\\Downloads\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Faizal\\\\Downloads\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Faizal\\\\Downloads\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Faizal\\\\Downloads\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Faizal\\\\Downloads\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Faizal\\\\Downloads\\\\e-voting\\\\src\\\\Components\\\\Applicants.js\";\nimport React, { Component } from 'react';\nimport { Table, Header, Image, Button, Icon, Modal } from 'semantic-ui-react';\nimport { withRouter } from 'react-router-dom';\nimport firebaseConf from './Firebase';\n\nvar TableExampleSelectableInvertedRow =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TableExampleSelectableInvertedRow, _Component);\n\n  function TableExampleSelectableInvertedRow(props) {\n    var _this;\n\n    _classCallCheck(this, TableExampleSelectableInvertedRow);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TableExampleSelectableInvertedRow).call(this, props));\n\n    _this.openDisapprove = function (id, aspirantKey, lastName, firstName, prefectName, section, schoolId, reason, todo, imageUrl) {\n      _this.setState({\n        userId: id,\n        aKey: aspirantKey,\n        lastName: lastName,\n        firstName: firstName,\n        prefectName: prefectName,\n        section: section,\n        schoolId: schoolId,\n        reason: reason,\n        todo: todo,\n        imageUrl: imageUrl\n      });\n\n      _this.handleOpenDisapprovedModal();\n    };\n\n    _this.removeItem = function (userId, aKey, lastName, firstName, prefectName, section, schoolId, reason, todo, imageUrl) {\n      _this.setState({\n        isLoading: true\n      });\n\n      console.log(aKey);\n      var disapproveRef = firebaseConf.database().ref(\"disapprovedAspirants\");\n      disapproveRef.child(\"\".concat(aKey)).set({\n        firstName: firstName,\n        lastName: lastName,\n        prefectName: prefectName,\n        prefectId: userId,\n        reason: reason,\n        section: section,\n        todo: todo,\n        imageUrl: imageUrl,\n        schoolId: schoolId\n      });\n      var itemRef = firebaseConf.database().ref(\"/posts/\".concat(userId, \"/aspirants/\").concat(aKey));\n      itemRef.remove().then(function () {\n        _this.setState({\n          isLoading: false\n        });\n\n        _this.handleCloseDisapprovedModal();\n      });\n    };\n\n    _this.handleOpenDisapprovedModal = function () {\n      _this.setState({\n        openDisapprovedModal: true\n      });\n    };\n\n    _this.handleCloseDisapprovedModal = function () {\n      _this.setState({\n        openDisapprovedModal: false\n      });\n    };\n\n    _this.changePost = function (post, lastName, firstName, id, aspirantKey, section, reason, todo, imageUrl) {\n      _this.props.history.push({\n        pathname: '/change',\n        state: {\n          post: post,\n          lastName: lastName,\n          firstName: firstName,\n          id: id,\n          aspirantKey: aspirantKey,\n          section: section,\n          reason: reason,\n          todo: todo,\n          imageUrl: imageUrl\n        }\n      });\n    };\n\n    _this.fetchAspirantsdata = function () {\n      firebaseConf.database().ref('posts').orderByChild('post').on('value', function (snapshot) {\n        var postsData = [];\n        snapshot.forEach(function (data) {\n          postsData.push({\n            aspirants: Object.entries(data.val().aspirants ? data.val().aspirants : []).map(function (e) {\n              return Object.assign(e[1], {\n                aspirantKey: e[0]\n              });\n            })\n          });\n        });\n\n        _this.setState({\n          postsData: postsData\n        }); //trying to get the items in the in aspirants \n\n\n        var newData = postsData.filter(function (item) {\n          return item.aspirants.length > 0;\n        });\n        var finalData = newData.map(function (item) {\n          return item.aspirants;\n        }); //joining all the arrays together\n\n        var finalFinalData = finalData.reduce(function (a, b) {\n          return a.concat(b);\n        }, []);\n\n        _this.setState({\n          aspirant: finalFinalData\n        });\n\n        console.log(_this.state.aspirant);\n      });\n    };\n\n    _this.state = {\n      postsData: [],\n      isLoading: false,\n      openDisapprovedModal: false,\n      aKey: '',\n      userId: '',\n      firstName: '',\n      lastName: '',\n      prefectName: '',\n      section: '',\n      schoolId: '',\n      reson: '',\n      todo: '',\n      imageUrl: '',\n      basic: true,\n      buttonContent: 'Approved',\n      aspirant: []\n    };\n    return _this;\n  }\n\n  _createClass(TableExampleSelectableInvertedRow, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchAspirantsdata();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          postsData = _this$state.postsData,\n          isLoading = _this$state.isLoading,\n          openDisapprovedModal = _this$state.openDisapprovedModal,\n          aspirant = _this$state.aspirant,\n          userId = _this$state.userId,\n          aKey = _this$state.aKey,\n          firstName = _this$state.firstName,\n          lastName = _this$state.lastName,\n          schoolId = _this$state.schoolId,\n          section = _this$state.section,\n          reason = _this$state.reason,\n          imageUrl = _this$state.imageUrl,\n          prefectId = _this$state.prefectId;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Table, {\n        celled: true,\n        inverted: true,\n        selectable: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(Table.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(Table.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Fullname\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Post\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"Class(SS2)\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"School ID\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Reason want to become a Prefect\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"What would do if put in that post\"), React.createElement(Table.HeaderCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Status\"))), React.createElement(Table.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, aspirant.map(function (item, index) {\n        return React.createElement(Table.Row, {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(Header, {\n          as: \"h4\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, React.createElement(Image, {\n          src: item.imageUrl.downloadURL ? item.imageUrl : '',\n          rounded: true,\n          size: \"mini\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }), React.createElement(Header.Content, {\n          style: {\n            color: 'white'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, item.lastName + ' ' + item.firstName))), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, item.prefectName), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }, item.section), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, item.schoolId), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, item.reason), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, item.todo), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, React.createElement(Button, {\n          basic: _this2.state.basic,\n          color: \"green\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, _this2.state.buttonContent), React.createElement(Button, {\n          basic: true,\n          color: \"red\",\n          onClick: function onClick() {\n            return _this2.openDisapprove(item.prefectId, item.aspirantKey, item.lastName, item.firstName, item.prefectName, item.section, item.schoolId, item.reason, item.todo, item.imageUrl);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, \"Disapprove\"), React.createElement(Button, {\n          basic: true,\n          color: \"yellow\",\n          onClick: function onClick() {\n            return _this2.changePost(item.prefectName, item.lastName, item.firstName, item.prefectId, item.aspirantKey, item.section, item.reason, item.todo, item.imageUrl.downloadURL);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, \"Change Post\")));\n      }))), React.createElement(Image, {\n        src: this.state.img,\n        rounded: true,\n        size: \"mini\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        open: openDisapprovedModal,\n        onClose: this.handleCloseDisapprovedModal,\n        basic: true,\n        size: \"small\",\n        style: {\n          minHeight: '100vh'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(Header, {\n        icon: \"user delete\",\n        content: \"Removal Confirmation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(Modal.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, \"Are you sure you want to remove \", this.state.lastName + ' ' + this.state.firstName)), React.createElement(Modal.Actions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(Button, {\n        basic: true,\n        color: \"red\",\n        inverted: true,\n        onClick: this.handleCloseDisapprovedModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        name: \"remove\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }), \" No\"), React.createElement(Button, {\n        color: \"green\",\n        onClick: function onClick() {\n          return _this2.removeItem(userId, aKey, lastName, firstName, prefectName, section, section, reason, todo, imageUrl);\n        },\n        loading: isLoading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        name: \"checkmark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }), \" Yes\")))));\n    }\n  }]);\n\n  return TableExampleSelectableInvertedRow;\n}(Component);\n\nexport default withRouter(TableExampleSelectableInvertedRow);","map":{"version":3,"sources":["C:\\Users\\Faizal\\Downloads\\e-voting\\src\\Components\\Applicants.js"],"names":["React","Component","Table","Header","Image","Button","Icon","Modal","withRouter","firebaseConf","TableExampleSelectableInvertedRow","props","openDisapprove","id","aspirantKey","lastName","firstName","prefectName","section","schoolId","reason","todo","imageUrl","setState","userId","aKey","handleOpenDisapprovedModal","removeItem","isLoading","console","log","disapproveRef","database","ref","child","set","prefectId","itemRef","remove","then","handleCloseDisapprovedModal","openDisapprovedModal","changePost","post","history","push","pathname","state","fetchAspirantsdata","orderByChild","on","snapshot","postsData","forEach","data","aspirants","Object","entries","val","map","e","assign","newData","filter","item","length","finalData","finalFinalData","reduce","a","b","concat","aspirant","reson","basic","buttonContent","index","downloadURL","color","img","minHeight"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Table, Header, Image, Button, Icon, Modal} from 'semantic-ui-react';\r\nimport {withRouter} from 'react-router-dom';\r\nimport firebaseConf from './Firebase';\r\n\r\nclass TableExampleSelectableInvertedRow extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      postsData: [],\r\n      isLoading: false,\r\n      openDisapprovedModal: false,\r\n      aKey:'',\r\n      userId: '',\r\n      firstName:'',\r\n      lastName:'',\r\n      prefectName:'',\r\n      section:'',\r\n      schoolId:'',\r\n      reson:'',\r\n      todo:'',\r\n      imageUrl:'',      \r\n      basic: true,\r\n      buttonContent: 'Approved',\r\n      aspirant: [],\r\n    };\r\n  }\r\n  \r\n  openDisapprove = (id,aspirantKey,lastName, firstName,prefectName,section,schoolId,reason,todo,imageUrl) => {\r\n    this.setState({userId: id, aKey:aspirantKey,lastName,firstName,prefectName,section,schoolId,reason,todo,imageUrl});\r\n    \r\n    this.handleOpenDisapprovedModal();\r\n  };\r\n\r\n  removeItem = (userId,aKey,lastName,firstName,prefectName,section,schoolId,reason,todo,imageUrl) => {\r\n    this.setState({isLoading: true});\r\n    console.log(aKey)\r\n    const disapproveRef = firebaseConf\r\n      .database()\r\n      .ref(`disapprovedAspirants`);\r\n\r\n    disapproveRef\r\n      .child(`${aKey}`)\r\n      .set({\r\n        firstName: firstName,\r\n        lastName: lastName,\r\n        prefectName: prefectName,\r\n        prefectId:userId,\r\n        reason: reason,\r\n        section: section,\r\n        todo: todo,\r\n        imageUrl: imageUrl,\r\n        schoolId: schoolId,\r\n      })\r\n\r\n\r\n\r\n    const itemRef = firebaseConf.database().ref(`/posts/${userId}/aspirants/${aKey}`);\r\n    itemRef.remove().then(() => {\r\n      this.setState({isLoading: false});\r\n      this.handleCloseDisapprovedModal();\r\n    });\r\n  };\r\n\r\n  handleOpenDisapprovedModal = () => {\r\n    this.setState({openDisapprovedModal: true});\r\n  };\r\n\r\n  handleCloseDisapprovedModal = () => {\r\n    this.setState({openDisapprovedModal: false});\r\n  };\r\n  \r\n  changePost = (post,lastName,firstName, id,aspirantKey,section,reason,todo,imageUrl) => {\r\n    this.props.history.push({\r\n      pathname: '/change',\r\n      state: {post,lastName, firstName, id,aspirantKey,section,reason,todo,imageUrl},\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.fetchAspirantsdata();\r\n  }\r\n\r\n  fetchAspirantsdata = () => {\r\n    firebaseConf\r\n      .database()\r\n      .ref('posts')\r\n      .orderByChild('post')\r\n      .on('value', snapshot => {\r\n        const postsData = [];\r\n        snapshot.forEach(data => {\r\n          postsData.push({\r\n            aspirants: Object.entries(\r\n              data.val().aspirants ? data.val().aspirants : []\r\n            ).map(e => Object.assign(e[1], {aspirantKey: e[0]})),\r\n          });\r\n          });\r\n\r\n          this.setState({postsData: postsData});\r\n          //trying to get the items in the in aspirants \r\n          let newData = postsData.filter(item => {\r\n            return item.aspirants.length > 0;\r\n          });\r\n\r\n          let finalData = newData.map(item => {\r\n            return item.aspirants;\r\n          });\r\n          //joining all the arrays together\r\n          let finalFinalData = finalData.reduce((a, b) => {\r\n            return a.concat(b);\r\n          }, []);\r\n\r\n          this.setState({aspirant: finalFinalData});\r\n          console.log(this.state.aspirant);\r\n        });\r\n      };\r\n  \r\n\r\n  render() {\r\n    const {postsData, isLoading, openDisapprovedModal, aspirant,userId,aKey,firstName,lastName,schoolId,section,reason,imageUrl,prefectId} = this.state;\r\n    return (\r\n      <div>\r\n        <Table celled inverted selectable>\r\n          <Table.Header>\r\n            <Table.Row>\r\n              <Table.HeaderCell>Fullname</Table.HeaderCell>\r\n              <Table.HeaderCell>Post</Table.HeaderCell>\r\n              <Table.HeaderCell>Class(SS2)</Table.HeaderCell>\r\n              <Table.HeaderCell>School ID</Table.HeaderCell>\r\n              <Table.HeaderCell>\r\n                Reason want to become a Prefect\r\n              </Table.HeaderCell>\r\n              <Table.HeaderCell>\r\n                What would do if put in that post\r\n              </Table.HeaderCell>\r\n              <Table.HeaderCell>Status</Table.HeaderCell>\r\n            </Table.Row>\r\n          </Table.Header>\r\n          <Table.Body>\r\n            {aspirant.map((item, index) => (\r\n              <Table.Row key={index}>\r\n                <Table.Cell>\r\n                  <Header as=\"h4\">\r\n                    <Image\r\n                      src={item.imageUrl.downloadURL ? item.imageUrl : ''}\r\n                      rounded\r\n                      size=\"mini\"\r\n                    />\r\n                    <Header.Content style={{color: 'white'}}>\r\n                      {item.lastName+' '+item.firstName}\r\n                    </Header.Content>\r\n                  </Header>\r\n                </Table.Cell>\r\n                <Table.Cell>{item.prefectName}</Table.Cell>\r\n                <Table.Cell>{item.section}</Table.Cell>\r\n                <Table.Cell>{item.schoolId}</Table.Cell>\r\n                <Table.Cell>{item.reason}</Table.Cell>\r\n                <Table.Cell>{item.todo}</Table.Cell>\r\n                <Table.Cell>\r\n                  <Button basic={this.state.basic} color=\"green\">\r\n                    {this.state.buttonContent}\r\n                  </Button>\r\n                  <Button\r\n                    basic\r\n                    color=\"red\"\r\n                    onClick={() =>\r\n                      this.openDisapprove(item.prefectId,item.aspirantKey, item.lastName,item.firstName,item.prefectName,item.section,item.schoolId,item.reason,item.todo,item.imageUrl)\r\n                    }\r\n                  >\r\n                    Disapprove\r\n                  </Button>\r\n                  <Button\r\n                    basic\r\n                    color=\"yellow\"\r\n                    onClick={() =>\r\n                      this.changePost(\r\n                        item.prefectName,\r\n                        (item.lastName),\r\n                        (item.firstName),\r\n                        item.prefectId,\r\n                        item.aspirantKey,\r\n                        item.section,\r\n                        item.reason,\r\n                        item.todo,\r\n                        item.imageUrl.downloadURL\r\n                      )\r\n                    }\r\n                  >\r\n                    Change Post\r\n                  </Button>\r\n                </Table.Cell>\r\n              </Table.Row>\r\n            ))}\r\n          </Table.Body>\r\n        </Table>\r\n        <Image src={this.state.img} rounded size=\"mini\" />\r\n        {/* .............................................................................................................................................. */}\r\n        {/* .............................................................................................................................................. */}\r\n        {/* .............................................................................................................................................. */}\r\n\r\n        <div>\r\n          <Modal\r\n            open={openDisapprovedModal}\r\n            onClose={this.handleCloseDisapprovedModal}\r\n            basic\r\n            size=\"small\"\r\n            style={{minHeight: '100vh'}}\r\n          >\r\n            <Header icon=\"user delete\" content=\"Removal Confirmation\" />\r\n            <Modal.Content>\r\n              <p>Are you sure you want to remove {this.state.lastName+' '+this.state.firstName}</p>\r\n            </Modal.Content>\r\n            <Modal.Actions>\r\n              <Button\r\n                basic\r\n                color=\"red\"\r\n                inverted\r\n                onClick={this.handleCloseDisapprovedModal}\r\n              >\r\n                <Icon name=\"remove\" /> No\r\n              </Button>\r\n              <Button\r\n                color=\"green\"\r\n                onClick={() => this.removeItem(userId,aKey,lastName,firstName,prefectName,section,section,reason,todo,imageUrl)}\r\n                loading={isLoading}\r\n              >\r\n                <Icon name=\"checkmark\" /> Yes\r\n              </Button>\r\n            </Modal.Actions>\r\n          </Modal>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(TableExampleSelectableInvertedRow);\r\n"]},"metadata":{},"sourceType":"module"}