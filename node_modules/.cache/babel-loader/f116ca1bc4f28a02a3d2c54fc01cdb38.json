{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\raheem.azeezat\\\\Desktop\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\raheem.azeezat\\\\Desktop\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\raheem.azeezat\\\\Desktop\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\raheem.azeezat\\\\Desktop\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\raheem.azeezat\\\\Desktop\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\raheem.azeezat\\\\Desktop\\\\e-voting\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\raheem.azeezat\\\\Desktop\\\\e-voting\\\\src\\\\Components\\\\Id.js\";\nimport React, { Component } from 'react';\nimport { Form, Input, Button } from 'semantic-ui-react';\nimport firebaseConf from './Firebase';\n\nvar AddId =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddId, _Component);\n\n  function AddId() {\n    var _this;\n\n    _classCallCheck(this, AddId);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddId).call(this));\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        isLoading: true\n      });\n\n      var _this$state = _this.state,\n          fetchedSchoolId = _this$state.fetchedSchoolId,\n          schoolId = _this$state.schoolId,\n          fullName = _this$state.fullName; //finding the one that is equal to the value in the text box \n\n      var filteredSchoolId = fetchedSchoolId.find(function (id) {\n        return _this.state.schoolId === id.schoolId;\n      }); //if the value is equal to the one in the text box..\n\n      if (filteredSchoolId) {\n        //raise an error\n        _this.showAlert('danger', 'Someone with this school ID has already been added');\n\n        _this.setState({\n          isLoading: false\n        });\n      } else {\n        //else send the data to firebase\n        var idRef = firebaseConf.database().ref(\"schoolInfo\");\n        var childId = schoolId;\n        idRef //setting the child name to this.state.schoolId\n        .child(childId).set({\n          fullname: fullName,\n          schoolId: schoolId\n        }).then(function () {\n          _this.showAlert('success', 'You have successfully added a person to be able to vote');\n\n          _this.setState({\n            isLoading: false,\n            fullName: '',\n            schoolId: ''\n          });\n        });\n      }\n    };\n\n    _this.state = {\n      fullName: '',\n      schoolId: '',\n      isLoading: false,\n      alert: false,\n      alertData: {},\n      fetchedSchoolId: []\n    };\n    return _this;\n  } //for the successful alert message\n\n\n  _createClass(AddId, [{\n    key: \"showAlert\",\n    value: function showAlert(type, message) {\n      var _this2 = this;\n\n      this.setState({\n        alert: true,\n        alertData: {\n          type: type,\n          message: message\n        }\n      });\n      setTimeout(function () {\n        _this2.setState({\n          alert: false\n        });\n      }, 8000);\n    } //handle change of the text box\n\n  }, {\n    key: \"componentDidMount\",\n    //fetch the school id\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      firebaseConf.database().ref('schoolInfo').on('value', function (snapshot) {\n        var fetchedSchoolId = [];\n        snapshot.forEach(function (data) {\n          var fetchedSchoolIdNew = {\n            schoolId: data.key\n          };\n          fetchedSchoolId.push(fetchedSchoolIdNew);\n\n          _this3.setState({\n            fetchedSchoolId: fetchedSchoolId\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          fullName = _this$state2.fullName,\n          schoolId = _this$state2.schoolId;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"marquee\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"The field must be filled with CAPITAL LETTERS\"), this.state.alert && React.createElement(\"div\", {\n        className: \"alert alert-\".concat(this.state.alertData.type),\n        role: \"alert\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, this.state.alertData.message)), React.createElement(Form, {\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        widths: \"equal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(Form.Field, {\n        control: Input,\n        label: \"Fullname\",\n        placeholder: \"Fullname\",\n        name: \"fullName\",\n        value: fullName,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }), React.createElement(Form.Field, {\n        control: Input,\n        label: \"School ID\",\n        placeholder: \"School ID\",\n        name: \"schoolId\",\n        value: schoolId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      })), React.createElement(Form.Field, {\n        control: Button,\n        type: \"submit\",\n        color: \"blue\",\n        disabled: !fullName || !schoolId,\n        loading: this.state.isLoading,\n        onClick: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Submit\")));\n    }\n  }]);\n\n  return AddId;\n}(Component);\n\nexport default AddId;","map":{"version":3,"sources":["C:\\Users\\raheem.azeezat\\Desktop\\e-voting\\src\\Components\\Id.js"],"names":["React","Component","Form","Input","Button","firebaseConf","AddId","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","isLoading","state","fetchedSchoolId","schoolId","fullName","filteredSchoolId","find","id","showAlert","idRef","database","ref","childId","child","set","fullname","then","alert","alertData","type","message","setTimeout","on","snapshot","forEach","data","fetchedSchoolIdNew","key","push"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {Form, Input, Button} from 'semantic-ui-react';\r\nimport firebaseConf from './Firebase';\r\n\r\nclass AddId extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      fullName: '',\r\n      schoolId: '',\r\n      isLoading: false,\r\n      alert: false,\r\n      alertData: {},\r\n      fetchedSchoolId: [],\r\n    };\r\n  }\r\n  //for the successful alert message\r\n  showAlert(type, message) {\r\n    this.setState({\r\n      alert: true,\r\n      alertData: {type, message},\r\n    });\r\n    setTimeout(() => {\r\n      this.setState({alert: false});\r\n    }, 8000);\r\n  }\r\n  //handle change of the text box\r\n  handleChange = e => {\r\n    this.setState({[e.target.name]: e.target.value});\r\n  };\r\n  //fetch the school id\r\n  componentDidMount() {\r\n    firebaseConf\r\n      .database()\r\n      .ref('schoolInfo')\r\n      .on('value', snapshot => {\r\n        const fetchedSchoolId = [];\r\n        snapshot.forEach(data => {\r\n          const fetchedSchoolIdNew = {\r\n            schoolId: data.key,\r\n          };\r\n          fetchedSchoolId.push(fetchedSchoolIdNew);\r\n          this.setState({fetchedSchoolId});\r\n        });\r\n      });\r\n  }\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    this.setState({isLoading: true});\r\n\r\n    const {fetchedSchoolId, schoolId, fullName} = this.state;\r\n//finding the one that is equal to the value in the text box \r\n    let filteredSchoolId = fetchedSchoolId.find(id => {\r\n      return this.state.schoolId === id.schoolId;\r\n    });\r\n    //if the value is equal to the one in the text box..\r\n    if (filteredSchoolId) {\r\n        //raise an error\r\n      this.showAlert(\r\n        'danger',\r\n        'Someone with this school ID has already been added'\r\n      );\r\n      this.setState({isLoading: false})\r\n    } else {\r\n        //else send the data to firebase\r\n      const idRef = firebaseConf.database().ref(`schoolInfo`);\r\n      let childId = schoolId;\r\n      idRef\r\n      //setting the child name to this.state.schoolId\r\n        .child(childId)\r\n        .set({\r\n\r\n          fullname: fullName,\r\n          schoolId: schoolId,\r\n        })\r\n        .then(() => {\r\n          this.showAlert(\r\n            'success',\r\n            'You have successfully added a person to be able to vote'\r\n          );\r\n          this.setState({isLoading: false, fullName: '', schoolId: ''});\r\n        });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {fullName, schoolId} = this.state;\r\n    return (\r\n      <div>\r\n        <marquee>The field must be filled with CAPITAL LETTERS</marquee>\r\n        {this.state.alert && (\r\n          <div\r\n            className={`alert alert-${this.state.alertData.type}`}\r\n            role=\"alert\"\r\n          >\r\n            <div className=\"container\">{this.state.alertData.message}</div>\r\n          </div>\r\n        )}\r\n        <Form onChange={this.handleChange}>\r\n          <Form.Group widths=\"equal\">\r\n            <Form.Field\r\n              control={Input}\r\n              label=\"Fullname\"\r\n              placeholder=\"Fullname\"\r\n              name=\"fullName\"\r\n              value={fullName}\r\n            />\r\n            <Form.Field\r\n              control={Input}\r\n              label=\"School ID\"\r\n              placeholder=\"School ID\"\r\n              name=\"schoolId\"\r\n              value={schoolId}\r\n            />\r\n          </Form.Group>\r\n          <Form.Field\r\n            control={Button}\r\n            type=\"submit\"\r\n            color=\"blue\"\r\n            disabled={!fullName || !schoolId}\r\n            loading={this.state.isLoading}\r\n            onClick={this.handleSubmit}\r\n          >\r\n            Submit\r\n          </Form.Field>\r\n        </Form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddId;\r\n"]},"metadata":{},"sourceType":"module"}